(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const i={onDemand:1e4,baseline:1e4,peak:1e5,peakWidth:1};function f(e){return e>=1e9?(e/1e9).toFixed(0)+"B":e>=1e6?(e/1e6).toFixed(0)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}function Te(){return{workload:new URLSearchParams(window.location.search).get("workload")||"morningPeak"}}const Pe=Te();function Ue(e){const t=document.getElementById("debugPanel");t.innerHTML=e.map(n=>{const[a,o]=n.split(": ");return`<div class="debug-entry"><span class="debug-key">${a}:</span><span class="debug-value">${o}</span></div>`}).join("")}const k=[{family:"i4i",instance:"i4i.xlarge",baseline:78e3,peak:12e4,storage:937,price:3.325},{family:"i3en",instance:"i3en.xlarge",baseline:39e3,peak:6e4,storage:2.44*1024,price:4.378}];function Z(e,t,n,a){for(let o=3;o<1e3;o+=3){const s=3/o*e/t<=.9,r=a/3*o>=n;if(s&&r)return o}return 3}function Re(e,t){const n=e*.5,a=.2,o=Z(n,k[0].storage,t,k[0].baseline),s=Z(n,k[1].storage,t,k[1].baseline),r=k[0].price,l=k[1].price,c=o/3*r*730*(1-a),m=s/3*l*730*(1-a),g=m<=c?m:c,C=m<=c?"i3en":"i4i",u=m<=c?s:o;return{scyllaCost:g,nodeCount:u,family:C}}function P(){let t=parseInt(document.getElementById("itemSize").value)*.0009765625;t>1&&(t=Math.floor(t));const n=Math.ceil(t),a=Math.ceil(t/4),o=parseInt(document.getElementById("readConst").value)/100,s=1-o,r=parseInt(document.getElementById("readTrans").value)/100,l=parseInt(document.getElementById("writeTrans").value)/100,c=1-l,m=i.peakWidth*30,g=730-m,C=parseInt(document.getElementById("reservedCapacity").value)/100,u=parseInt(document.getElementById("ratioProvisioned").value)/100,y=1-u,oe=i.baseline*y*c*n,se=i.baseline*y*l*2*n,H=oe+se;let h=H*C;h=Math.ceil(h/100)*100;let U=H-h;U=Math.ceil(Math.max(U,0));let ie=Math.ceil(U*g),re=i.peak*y*c*n,de=i.peak*y*l*2*n,R=re+de-h;R=Math.ceil(Math.max(R,0));let le=Math.ceil(R*m),ce=Math.ceil(ie+le)*65e-5,ue=h*128e-6*730,O=ce+ue,N=h*1.5;const me=i.baseline*u*s*.5*a,pe=i.baseline*u*o*a,ye=i.baseline*u*r*2*a,q=me+pe+ye;let I=q*C;I=Math.ceil(I/100)*100;let $=q-I;$=Math.ceil(Math.max($,0));let ge=Math.ceil($*g),Ce=i.peak*u*s*.5*a,fe=i.peak*u*o*a,xe=i.peak*u*r*2*a,M=Ce+fe+xe-I;M=Math.ceil(Math.max(M,0));let ve=Math.ceil(M*m),he=Math.ceil(ge+ve)*13e-5,Ie=I*25e-6*730,z=he+Ie,K=I*.3;const ke=O+z,Ee=N+K,be=ke+Ee/12,_=parseInt(document.getElementById("ratioDemand").value)/100,S=i.onDemand*_*3600*730,V=(S*s*.5*a+S*o*a+S*r*2*a)*125e-9,G=1-u,A=i.onDemand*G*3600*730,j=(A*c*n+A*l*2*n)*625e-9,Q=V+j,W=parseInt(document.getElementById("storage").value),L=W*.25,B=document.querySelector('input[name="pricingModel"]:checked').value,w=B==="onDemand"?Q+L:be+L,X=B==="onDemand"?i.onDemand*_:i.baseline*u,Y=B==="onDemand"?i.onDemand*G:i.baseline*y,J=X+Y,T=Re(W,J),De=w/2,Be=(w/T.scyllaCost).toFixed(1);document.getElementById("costDiff").textContent=`$${f(De)}`;let x=[`itemSizeKB: ${t}`,`storageGB: ${W}`,`readsOpsSec: ${X.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,`writesOpsSec: ${Y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,`totalOpsSec: ${J.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`];B==="onDemand"?x=x.concat([`dynamoCostDemandReads: $${V.toFixed(2)}`,`dynamoCostDemandWrites: $${j.toFixed(2)}`,`dynamoCostDemand: $${Q.toFixed(2)}`]):x=x.concat([`dynamoCostMonthlyWCU: $${O.toFixed(2)}`,`dynamoCostUpfrontWCU: $${N.toFixed(2)}`,`dynamoCostMonthlyRCU: $${z.toFixed(2)}`,`dynamoCostUpfrontRCU: $${K.toFixed(2)}`]),x=x.concat([`dynamoCostStorage: $${L.toFixed(2)}`,`dynamoCostTotal: $${w.toFixed(2)}`,`scyllaCost: $${T.scyllaCost.toFixed(2)}`,`costRatio: ${Be}`,`nodeCount: ${T.nodeCount}`,`family: ${T.family}`]),Ue(x),d.update()}function D(){const e=d.data.datasets[0].data,t=d.data.datasets[1].hidden?2:1,n=d.data.datasets[t].data;let a=0,o=0;for(let c=1;c<e.length;c++){const m=e[c-1].x,g=e[c-1].y,C=e[c].x,u=e[c].y,y=(g+u)/2*(C-m)*3600;a+=y}for(let c=1;c<n.length;c++){const m=n[c-1].x,g=n[c-1].y,C=n[c].x,u=n[c].y,y=(g+u)/2*(C-m)*3600;o+=y}const s=a/1e6,r=o/a*100,l=r<100?"red":"black";d.options.plugins.title.text=`Total Workload: ${s.toFixed(0)}M ops, Pricing coverage: ${r.toFixed(2)}%`,d.options.plugins.title.color=l,d.update()}const $e=document.getElementById("chart").getContext("2d");function ee(e,t,n){const a=[],o=Math.floor((24-n)/2),s=o+n;for(let r=0;r<=24;r++)r>=o&&r<s?a.push({x:r,y:t}):a.push({x:r,y:e});return a}function Me(){return Array.from({length:25},(e,t)=>({x:t,y:i.onDemand}))}function Se(e){switch(e){case"twiceDaily":return[{x:0,y:5e3},{x:6,y:1e4},{x:8,y:1e5},{x:10,y:1e4},{x:12,y:5e3},{x:16,y:1e4},{x:18,y:1e5},{x:20,y:1e4},{x:24,y:5e3}];case"constant":return Array.from({length:25},(t,n)=>({x:n,y:5e4}));case"morningPeak":default:return[{x:0,y:5e3},{x:8,y:1e4},{x:9,y:1e5},{x:10,y:1e4},{x:24,y:5e3}]}}let We=Me(),Le=ee(i.baseline,i.peak,i.peakWidth),we=Se(Pe.workload);const d=new Chart($e,{type:"scatter",data:{datasets:[{label:"Workload",borderColor:"#0F1040",backgroundColor:"rgba(170,170,170,0.5)",data:we,fill:!0,showLine:!0,borderDash:[4,4],tension:.3},{label:"On Demand",data:We,borderColor:"#0F1040",backgroundColor:"rgba(15,16,64,0.8)",showLine:!0,pointRadius:0,fill:!0,tension:.1},{label:"Provisioned",data:Le,borderColor:"#0F1040",backgroundColor:"rgba(15,16,64,0.8)",fill:!0,tension:.1,showLine:!0,pointRadius:0,hidden:!0}]},options:{plugins:{legend:{display:!1},title:{display:!0,text:"Total Ops"},tooltip:{callbacks:{label:function(e){return"Workload: "+f(e.raw.y)+" ops/sec"}}},dragData:{round:1,showTooltip:!0,onDrag:function(e,t,n,a){a.x=Math.round(a.x),a.y=Math.round(a.y/1e3)*1e3},onDragEnd:function(e,t,n,a){D(),d.update()},dragX:!0,dragY:!0}},scales:{x:{min:0,max:24,title:{display:!1},ticks:{stepSize:1,callback:function(e){return e.toString().padStart(2,"0")+":00"}}},y:{type:"logarithmic",title:{display:!0,text:"op/sec"},min:1e3,max:1e7,ticks:{callback:function(e){return e===1e3?"1K":e===1e4?"10K":e===1e5?"100K":e===1e6?"1M":e===1e7?"10M":null}}}}}});function p(){d.data.datasets[1].data=Array.from({length:25},(e,t)=>({x:t,y:i.onDemand})),d.data.datasets[2].data=ee(i.baseline,i.peak,i.peakWidth),d.update(),D(),P()}function v(e,t,n,a){const o=document.getElementById(e),s=document.getElementById(t),r=document.getElementById(n);o.addEventListener("click",function(l){l.stopPropagation(),s.value=parseInt(r.value),o.style.display="none",s.style.display="inline",setTimeout(()=>s.focus(),0)}),s.addEventListener("blur",function(){const l=parseInt(s.value);!isNaN(l)&&l>=r.min&&l<=r.max&&(r.value=l,o.innerText=a(l),p()),s.style.display="none",o.style.display="inline"}),s.addEventListener("keydown",function(l){(l.key==="Enter"||l.key==="Tab"||l.key==="Escape")&&(l.preventDefault(),s.blur())}),r.addEventListener("input",function(l){o.innerText=a(parseInt(l.target.value)),p()})}function te(e){const t=Chart.helpers.getRelativePosition(e,d),n=d.scales.x.getValueForPixel(t.x),a=d.scales.y.getValueForPixel(t.y);n>d.scales.x.min&&n<d.scales.x.max&&a>d.scales.y.min&&a<d.scales.y.max&&(d.data.datasets[0].data.push({x:n,y:a}),D(),d.update())}function ne(e,t,n,a){document.getElementById(e).addEventListener("click",function(o){o.preventDefault();const s=document.getElementById(t);s.style.display==="none"?(s.style.display="block",this.textContent=n):(s.style.display="none",this.textContent=a)})}v("demandDsp","demandInp","demand",f);v("baselineDsp","baselineInp","baseline",f);v("peakDsp","peakInp","peak",f);v("peakWidthDsp","peakWidthInp","peakWidth",e=>e);v("itemSizeDsp","itemSizeInp","itemSize",e=>e<1024?`${e} B`:`${Math.floor(e/1024)} KB`);v("storageDsp","storageInp","storage",e=>e>=1024?(e/1024).toFixed(2)+" TB":e+" GB");v("reservedCapacityDsp","reservedCapacity","reservedCapacity",e=>`${e}%`);document.getElementById("chart").onclick=function(e){te(e)};document.getElementById("chart").onclick=function(e){te(e)};document.querySelector('input[name="pricingModel"][value="onDemand"]').addEventListener("change",e=>{const t=document.getElementById("demandParams"),n=document.getElementById("provisionedParams");e.target.checked&&(t.style.display="block",n.style.display="none",d.data.datasets[1].hidden=!1,d.data.datasets[2].hidden=!0,d.update(),D(),P())});document.querySelector('input[name="pricingModel"][value="provisioned"]').addEventListener("change",e=>{const t=document.getElementById("demandParams"),n=document.getElementById("provisionedParams");e.target.checked&&(t.style.display="none",n.style.display="block",d.data.datasets[1].hidden=!0,d.data.datasets[2].hidden=!1,d.update(),D(),P())});document.getElementById("demand").addEventListener("input",e=>{i.onDemand=parseInt(e.target.value),document.getElementById("demandDsp").innerText=f(i.onDemand),p()});document.getElementById("ratioDemand").addEventListener("input",e=>{const t=parseInt(e.target.value),n=100-t;document.getElementById("ratioDemandDsp").innerText=`${t}/${n}`,p()});document.getElementById("baseline").addEventListener("input",e=>{i.baseline=parseInt(e.target.value),document.getElementById("baselineDsp").innerText=f(i.baseline),p()});document.getElementById("peakWidth").addEventListener("input",e=>{i.peakWidth=Math.max(1,parseInt(e.target.value)),document.getElementById("peakWidthDsp").innerText=i.peakWidth,p()});document.getElementById("peak").addEventListener("input",e=>{i.peak=parseInt(e.target.value),document.getElementById("peakDsp").innerText=f(i.peak),p()});document.getElementById("ratioProvisioned").addEventListener("input",e=>{const t=parseInt(e.target.value),n=100-t;document.getElementById("ratioProvisionedDsp").innerText=`${t}/${n}`,p()});document.getElementById("storage").addEventListener("input",e=>{const t=parseInt(e.target.value);document.getElementById("storageDsp").innerText=t>=1024?(t/1024).toFixed(2)+" TB":t+" GB",p()});document.getElementById("storageDsp").innerText=document.getElementById("storage").value;ne("storageLink","storageParams","▲ Storage","▼ Storage");ne("consistencyLink","consistencyParams","▲ Consistency","▼ Consistency");document.getElementById("itemSize").addEventListener("input",function(e){const t=e.target,n=parseInt(t.value);n<=1024?t.step=64:t.step=1024;let a;n<1024?a=`${n} B`:a=`${Math.floor(n/1024)} KB`,document.getElementById("itemSizeDsp").innerText=a,p()});document.getElementById("writeTrans").addEventListener("input",e=>{const t=parseInt(e.target.value);document.getElementById("writeConsistencyDsp").innerText=t===0?"Non Transactional":t===100?"Transactional":`${t}% Transactional (${100-t}% Non Transactional)`,p()});const E=document.getElementById("readConst"),b=document.getElementById("readTrans"),F=document.getElementById("readConstDsp");function ae(){const e=parseInt(E.value);let t=parseInt(b.value),n=100-e-t;e===100?F.innerText="Strongly Consistent":n===100?F.innerText="Eventually Consistent":F.innerText=`Strongly Consistent: ${e}%, Eventually Consistent: ${n}%, Transactional: ${t}%`,p()}E.addEventListener("input",()=>{parseInt(E.value)>100-parseInt(b.value)&&(b.value=100-E.value),ae()});b.addEventListener("input",()=>{100-parseInt(b.value)<parseInt(E.value)&&(E.value=100-b.value),ae()});D();P();
